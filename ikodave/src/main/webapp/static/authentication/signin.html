<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <title>Sign In</title>
    <!-- Bootstrap CSS -->
    <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
            rel="stylesheet"
    />
    <!-- Your consolidated auth styles -->
    <link href="/static/authentication/auth.css" rel="stylesheet"/>
</head>
<body>
<div id="navbar-container"></div>
<script src="/static/shared_html/navbar.js"></script>
<script>loadNavbar();</script>

<div id="error-msg" class="mt-3 text-center"></div>

<div class="auth-container">
    <div class="card auth-card rounded-4 p-4">
        <h2 class="text-center mb-4">Sign In</h2>
        <form id="signin-form">
            <div class="mb-3">
                <label for="username" class="form-label">Username or Email</label>
                <input
                        type="text"
                        class="form-control"
                        id="username"
                        name="username"
                        placeholder="Enter username"
                        required
                />
            </div>
            <div class="mb-3">
                <label for="password" class="form-label">Password</label>
                <input
                        type="password"
                        class="form-control"
                        id="password"
                        name="password"
                        placeholder="Enter password"
                        required
                />
            </div>
            <button type="submit" class="btn btn-primary w-100 mb-3">Sign In</button>
            <p class="text-center">
                No account? <a href="/registration">Register</a>
            </p>
        </form>
    </div>
</div>

<!-- BEGIN floating-bubbles background -->
<div class="animation-area">
    <ul class="circles">
        <li></li><li></li><li></li><li></li><li></li>
        <li></li><li></li><li></li><li></li><li></li>
    </ul>
</div>
<!-- END floating-bubbles background -->


<!-- signin.js inline script -->
<script>
    document
        .getElementById("signin-form")
        .addEventListener("submit", async function (e) {
            e.preventDefault();
            const username = document.getElementById("username").value.trim();
            const password = document.getElementById("password").value.trim();
            const res = await fetch("/signin", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ username, password }),
            });
            const data = await res.json();
            if (data.status === "invalid") {
                document.getElementById(
                    "error-msg"
                ).innerHTML = `<div class="alert alert-danger text-center">Username or password is incorrect.</div>`;
            } else if (data.status === "ok") {
                window.location.href = "/profile";
            }
        });
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
